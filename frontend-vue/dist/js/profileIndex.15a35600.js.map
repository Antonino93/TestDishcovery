{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./src/components/ProfileFollowButton.vue?e1fe","webpack:///./src/components/ProfileFollowButton.vue","webpack:///./src/components/ProfileFollowButton.vue?4d5d","webpack:///./src/components/ProfileFollowButton.vue?e617","webpack:///./src/views/ProfileIndex.vue?bba5","webpack:///./src/views/ProfileIndex.vue","webpack:///./src/views/ProfileIndex.vue?bd89","webpack:///./src/views/ProfileIndex.vue?d4de"],"names":["$","$values","values","target","stat","O","render","_vm","this","_h","$createElement","_c","_self","class","following","attrs","isLoading","on","onFollowButtonClick","_v","_s","followButtonTitle","staticRenderFns","username","Profile","unFollow","follow","required","component","FeedType","profile","staticClass","image","bio","name","$routesNames","profileSettings","author","tabs","activeTabId","activeFeed","itemsPerPage","currentPage","onPageChanged","onTabChanged","registerHooks","_profile","isFollowActionInProgress","My","articles","articlesCount","activeTag","profilesCache","myTitle","isMyProfile","id","title","Favorites","User","currentUser","to","from","next","vm","onRouteUpdate","toUserName","params","fromUserName","$router","push","home","get","tabId","Object","some","v","fetchFeed","Error","page","pagination","limit","offset","Article","getList","favorited","window","scrollTo","components","CommonLoader","CommonFeed","ProfileFollowButton"],"mappings":"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","file":"js/profileIndex.15a35600.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:[\n    'btn btn-sm action-btn',\n    _vm.following ? 'btn-secondary' : 'btn-outline-secondary'\n  ],attrs:{\"disabled\":_vm.isLoading},on:{\"click\":_vm.onFollowButtonClick}},[_c('i',{class:[_vm.following ? 'ion-minus-round' : 'ion-plus-round']}),_vm._v(\" \"+_vm._s(_vm.followButtonTitle)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\r\n\r\nimport Profile from \"@/store/modules/Profile\";\r\n\r\n@Component\r\nexport default class ProfileFollowButton extends Vue {\r\n  @Prop({ required: true }) following!: boolean;\r\n  @Prop({ required: true }) username!: string;\r\n\r\n  isLoading = false;\r\n\r\n  get followButtonTitle(): string {\r\n    return this.following\r\n      ? `Unfollow ${this.username}`\r\n      : `Follow ${this.username}`;\r\n  }\r\n  async onFollowButtonClick(): Promise<void> {\r\n    this.isLoading = true;\r\n    try {\r\n      this.following\r\n        ? await Profile.unFollow(this.username)\r\n        : await Profile.follow(this.username);\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileFollowButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileFollowButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProfileFollowButton.vue?vue&type=template&id=7e5a26d6&\"\nimport script from \"./ProfileFollowButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProfileFollowButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLoading || !_vm.profile)?_c('common-loader'):_c('div',{staticClass:\"profile-page\"},[_c('div',{staticClass:\"user-info\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-10 offset-md-1\"},[_c('img',{staticClass:\"user-img\",attrs:{\"src\":_vm.profile.image}}),_c('h4',[_vm._v(_vm._s(_vm.profile.username))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.profile.bio)+\" \")]),(_vm.isMyProfile)?_c('router-link',{staticClass:\"btn action-btn btn-sm btn-outline-secondary\",attrs:{\"to\":{ name: _vm.$routesNames.profileSettings }}},[_c('i',{staticClass:\"ion-gear-a\"}),_vm._v(\" Edit Profile Settings \")]):_c('profile-follow-button',{attrs:{\"username\":_vm.author.username,\"following\":_vm.author.following}})],1)])])]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-10 offset-md-1\"},[_c('common-feed',{attrs:{\"tabs\":_vm.tabs,\"active-tab-id\":_vm.activeTabId,\"is-loading\":_vm.isLoading,\"feed\":_vm.activeFeed,\"items-per-page\":_vm.itemsPerPage,\"current-page\":_vm.currentPage},on:{\"page-changed\":_vm.onPageChanged,\"tab-changed\":_vm.onTabChanged}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\n\r\nimport CommonFeed, { IFeedTab } from \"@/components/CommonFeed.vue\";\r\nimport CommonLoader from \"@/components/CommonLoader.vue\";\r\nimport ProfileFollowButton from \"@/components/ProfileFollowButton.vue\";\r\nimport { Location } from \"@/router\";\r\nimport IPagination, {\r\n  DEFAULT_ITEMS_PER_PAGE,\r\n  DEFAULT_START_PAGE\r\n} from \"@/services/common/IPagination\";\r\nimport { IArticleList, IProfile } from \"@/services/realWorldApi/models\";\r\nimport Article from \"@/store/modules/Article\";\r\nimport Profile from \"@/store/modules/Profile\";\r\nimport User from \"@/store/modules/User\";\r\n\r\nenum FeedType {\r\n  Favorites = \"favorites\",\r\n  My = \"my\"\r\n}\r\n\r\nComponent.registerHooks([\"beforeRouteEnter\", \"beforeRouteUpdate\"]);\r\n\r\n@Component({\r\n  components: {\r\n    CommonLoader,\r\n    CommonFeed,\r\n    ProfileFollowButton\r\n  }\r\n})\r\nexport default class ProfileIndex extends Vue {\r\n  _profile: IProfile = { username: \"\", bio: \"\", image: \"\", following: false };\r\n  isLoading = false;\r\n  isFollowActionInProgress = false;\r\n  currentPage = DEFAULT_START_PAGE;\r\n  itemsPerPage = DEFAULT_ITEMS_PER_PAGE;\r\n\r\n  activeTabId: FeedType = FeedType.My;\r\n  activeFeed: IArticleList = { articles: [], articlesCount: 0 };\r\n  activeTag: string | null = null;\r\n\r\n  get profile(): IProfile {\r\n    return Profile.profilesCache[this._profile?.username] || this._profile;\r\n  }\r\n\r\n  get tabs(): IFeedTab[] {\r\n    const myTitle = this.isMyProfile\r\n      ? \"My Articles\"\r\n      : `${this.profile.username}'s Articles`;\r\n    return [\r\n      {\r\n        id: FeedType.My,\r\n        title: myTitle\r\n      },\r\n      {\r\n        id: FeedType.Favorites,\r\n        title: \"Favorited Articles\"\r\n      }\r\n    ];\r\n  }\r\n\r\n  get isMyProfile(): boolean {\r\n    return this.profile.username === User.currentUser?.username;\r\n  }\r\n\r\n  beforeRouteEnter(to: Location, from: Location, next: Function): void {\r\n    next((vm: ProfileIndex) => {\r\n      vm.onRouteUpdate(to, from, next);\r\n    });\r\n  }\r\n  beforeRouteUpdate(to: Location, from: Location, next: Function): void {\r\n    this.onRouteUpdate(to, from, next);\r\n  }\r\n\r\n  async onRouteUpdate(\r\n    to: Location,\r\n    from: Location,\r\n    next: Function\r\n  ): Promise<void> {\r\n    next();\r\n\r\n    this.isLoading = true;\r\n    try {\r\n      const toUserName = to?.params?.username;\r\n      const fromUserName = from?.params?.username;\r\n      if (!toUserName) {\r\n        this.$router.push({ name: this.$routesNames.home });\r\n        return;\r\n      }\r\n      if (toUserName !== fromUserName) {\r\n        this._profile = await Profile.get(toUserName);\r\n      }\r\n\r\n      const tabId = to?.params?.tabId;\r\n      if (tabId && Object.values(FeedType).some(v => (v as string) === tabId)) {\r\n        this.activeTabId = tabId as FeedType;\r\n      } else {\r\n        this.activeTabId = FeedType.My;\r\n      }\r\n\r\n      await this.fetchFeed();\r\n    } catch (e) {\r\n      this.$router.push({ name: this.$routesNames.home });\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  async onTabChanged(tabId: FeedType): Promise<void> {\r\n    switch (tabId) {\r\n      case FeedType.My:\r\n      case FeedType.Favorites:\r\n        this.activeTabId = tabId;\r\n        this.currentPage = DEFAULT_START_PAGE;\r\n        this.$router.push({\r\n          params: { username: this.profile.username, tabId: this.activeTabId }\r\n        });\r\n        await this.fetchFeed();\r\n        break;\r\n\r\n      default:\r\n        throw new Error(`Unexpected tabId: ${tabId}`);\r\n    }\r\n  }\r\n\r\n  async onPageChanged(page: number): Promise<void> {\r\n    this.currentPage = page;\r\n    await this.fetchFeed();\r\n  }\r\n\r\n  async fetchFeed(): Promise<void> {\r\n    this.isLoading = true;\r\n    try {\r\n      const pagination: IPagination = {\r\n        limit: this.itemsPerPage,\r\n        offset: (this.currentPage - 1) * this.itemsPerPage\r\n      };\r\n\r\n      switch (this.activeTabId) {\r\n        case FeedType.Favorites:\r\n          this.activeFeed = await Article.getList({\r\n            favorited: this.profile.username,\r\n            ...pagination\r\n          });\r\n          break;\r\n        case FeedType.My:\r\n          this.activeFeed = await Article.getList({\r\n            author: this.profile.username,\r\n            ...pagination\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileIndex.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileIndex.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProfileIndex.vue?vue&type=template&id=2edbcf4f&\"\nimport script from \"./ProfileIndex.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProfileIndex.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}