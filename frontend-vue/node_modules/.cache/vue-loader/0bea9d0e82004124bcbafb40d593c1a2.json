{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ProfileSettings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ProfileSettings.vue","mtime":1654014379745},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOw0KDQppbXBvcnQgQ29tbW9uRXJyb3JzTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uRXJyb3JzTGlzdC52dWUiOw0KaW1wb3J0IENvbW1vbkxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uTG9hZGVyLnZ1ZSI7DQppbXBvcnQgeyBJQ3VycmVudFVzZXIgfSBmcm9tICJAL3N0b3JlL21vZGVscyI7DQppbXBvcnQgVXNlciBmcm9tICJAL3N0b3JlL21vZHVsZXMvVXNlciI7DQppbXBvcnQgeyBpc0FycmF5T2ZTdHJpbmdzIH0gZnJvbSAiQC91dGlscy9BcnJheVV0aWxzIjsNCg0KQENvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6IHsNCiAgICBDb21tb25Mb2FkZXIsDQogICAgQ29tbW9uRXJyb3JzTGlzdA0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZVNldHRpbmdzIGV4dGVuZHMgVnVlIHsNCiAgaXNMb2FkaW5nID0gZmFsc2U7DQoNCiAgaW1hZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsOw0KICBiaW8gPSAiIjsNCiAgZW1haWwgPSAiIjsNCiAgcGFzc3dvcmQ6IHN0cmluZyB8IG51bGwgPSBudWxsOw0KICB1c2VybmFtZSA9ICIiOw0KICBlcnJvcnM/OiBzdHJpbmdbXSA9IFtdOw0KDQogIGdldCBoYXNFcnJvcnMoKTogYm9vbGVhbiB7DQogICAgcmV0dXJuICEhdGhpcy5lcnJvcnM/Lmxlbmd0aDsNCiAgfQ0KDQogIGdldCBjdXJyZW50VXNlcigpOiBQYXJ0aWFsPElDdXJyZW50VXNlcj4gew0KICAgIHJldHVybiBVc2VyLmN1cnJlbnRVc2VyIHx8IHt9Ow0KICB9DQoNCiAgbG9nb3V0KCk6IHZvaWQgew0KICAgIFVzZXIubG9nb3V0KCk7DQogICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiB0aGlzLiRyb3V0ZXNOYW1lcy5ob21lIH0pOw0KICB9DQoNCiAgYXN5bmMgdXBkYXRlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7DQogICAgdGhpcy5lcnJvcnMgPSBbXTsNCg0KICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsNCiAgICB0cnkgew0KICAgICAgYXdhaXQgVXNlci51cGRhdGUoew0KICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwNCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsDQogICAgICAgIGJpbzogdGhpcy5iaW8sDQogICAgICAgIGltYWdlOiB0aGlzLmltYWdlLA0KICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZQ0KICAgICAgfSk7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6IHRoaXMuJHJvdXRlc05hbWVzLmhvbWUgfSk7DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgaWYgKGlzQXJyYXlPZlN0cmluZ3MoZSkpIHsNCiAgICAgICAgdGhpcy5lcnJvcnMgPSBlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhyb3cgZTsNCiAgICAgIH0NCiAgICB9IGZpbmFsbHkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICB9DQogIH0NCiAgQFdhdGNoKCJjdXJyZW50VXNlciIsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIG9uQ3VycmVudFVzZXJMb2FkZWQobmV3VmFsdWU6IElDdXJyZW50VXNlcik6IHZvaWQgew0KICAgIHRoaXMuZXJyb3JzID0gW107DQogICAgaWYgKG5ld1ZhbHVlKSB7DQogICAgICB0aGlzLmltYWdlID0gbmV3VmFsdWUuaW1hZ2U7DQogICAgICB0aGlzLmJpbyA9IG5ld1ZhbHVlLmJpbzsNCiAgICAgIHRoaXMuZW1haWwgPSBuZXdWYWx1ZS5lbWFpbDsNCiAgICAgIHRoaXMudXNlcm5hbWUgPSBuZXdWYWx1ZS51c2VybmFtZTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ProfileSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProfileSettings.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"settings-page\">\r\n    <div class=\"container page\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-6 offset-md-3 col-xs-12\">\r\n          <h1 class=\"text-xs-center\">Your Settings</h1>\r\n          <common-errors-list :errors=\"errors\" />\r\n          <form>\r\n            <fieldset :disabled=\"isLoading\">\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"image\"\r\n                  class=\"form-control\"\r\n                  type=\"text\"\r\n                  placeholder=\"URL of profile picture\"\r\n                />\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"username\"\r\n                  class=\"form-control form-control-lg\"\r\n                  type=\"text\"\r\n                  placeholder=\"Your Name\"\r\n                  required=\"true\"\r\n                />\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <textarea\r\n                  v-model=\"bio\"\r\n                  class=\"form-control form-control-lg\"\r\n                  rows=\"8\"\r\n                  placeholder=\"Short bio about you\"\r\n                ></textarea>\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"email\"\r\n                  class=\"form-control form-control-lg\"\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  required=\"true\"\r\n                />\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"password\"\r\n                  class=\"form-control form-control-lg\"\r\n                  type=\"password\"\r\n                  placeholder=\"New password\"\r\n                />\r\n              </fieldset>\r\n              <common-loader v-if=\"isLoading\" :size=\"5\" />\r\n              <button\r\n                v-else\r\n                class=\"btn btn-lg btn-primary pull-xs-right\"\r\n                @click=\"updateSettings\"\r\n              >\r\n                Update Settings\r\n              </button>\r\n            </fieldset>\r\n          </form>\r\n          <hr />\r\n          <button class=\"btn btn-outline-danger\" @click=\"logout\">\r\n            Or click here to logout.\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\r\n\r\nimport CommonErrorsList from \"@/components/CommonErrorsList.vue\";\r\nimport CommonLoader from \"@/components/CommonLoader.vue\";\r\nimport { ICurrentUser } from \"@/store/models\";\r\nimport User from \"@/store/modules/User\";\r\nimport { isArrayOfStrings } from \"@/utils/ArrayUtils\";\r\n\r\n@Component({\r\n  components: {\r\n    CommonLoader,\r\n    CommonErrorsList\r\n  }\r\n})\r\nexport default class ProfileSettings extends Vue {\r\n  isLoading = false;\r\n\r\n  image: string | null = null;\r\n  bio = \"\";\r\n  email = \"\";\r\n  password: string | null = null;\r\n  username = \"\";\r\n  errors?: string[] = [];\r\n\r\n  get hasErrors(): boolean {\r\n    return !!this.errors?.length;\r\n  }\r\n\r\n  get currentUser(): Partial<ICurrentUser> {\r\n    return User.currentUser || {};\r\n  }\r\n\r\n  logout(): void {\r\n    User.logout();\r\n    this.$router.push({ name: this.$routesNames.home });\r\n  }\r\n\r\n  async updateSettings(): Promise<void> {\r\n    this.errors = [];\r\n\r\n    this.isLoading = true;\r\n    try {\r\n      await User.update({\r\n        email: this.email,\r\n        password: this.password,\r\n        bio: this.bio,\r\n        image: this.image,\r\n        username: this.username\r\n      });\r\n      this.$router.push({ name: this.$routesNames.home });\r\n    } catch (e) {\r\n      if (isArrayOfStrings(e)) {\r\n        this.errors = e;\r\n      } else {\r\n        throw e;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  @Watch(\"currentUser\", { immediate: true })\r\n  onCurrentUserLoaded(newValue: ICurrentUser): void {\r\n    this.errors = [];\r\n    if (newValue) {\r\n      this.image = newValue.image;\r\n      this.bio = newValue.bio;\r\n      this.email = newValue.email;\r\n      this.username = newValue.username;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}