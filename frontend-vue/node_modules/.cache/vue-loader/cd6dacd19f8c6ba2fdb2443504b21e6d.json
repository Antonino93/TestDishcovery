{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\ArticleComments.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\ArticleComments.vue","mtime":1654014379706},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUsIFdhdGNoIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7DQoNCmltcG9ydCBDb21tZW50QWRkIGZyb20gIkAvY29tcG9uZW50cy9Db21tZW50QWRkLnZ1ZSI7DQppbXBvcnQgQ29tbWVudERpc3BsYXkgZnJvbSAiQC9jb21wb25lbnRzL0NvbW1lbnREaXNwbGF5LnZ1ZSI7DQppbXBvcnQgQ29tbW9uTG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25Mb2FkZXIudnVlIjsNCmltcG9ydCB7IElDb21tZW50IH0gZnJvbSAiQC9zZXJ2aWNlcy9yZWFsV29ybGRBcGkvbW9kZWxzIjsNCmltcG9ydCBBcnRpY2xlIGZyb20gIkAvc3RvcmUvbW9kdWxlcy9BcnRpY2xlIjsNCg0KQENvbXBvbmVudCh7IGNvbXBvbmVudHM6IHsgQ29tbW9uTG9hZGVyLCBDb21tZW50QWRkLCBDb21tZW50RGlzcGxheSB9IH0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBBcnRpY2xlQ29tbWVudHMgZXh0ZW5kcyBWdWUgew0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlIH0pIHNsdWchOiBzdHJpbmc7DQoNCiAgY29tbWVudHM6IElDb21tZW50W10gPSBbXTsNCiAgaXNMb2FkaW5nID0gZmFsc2U7DQoNCiAgcmVmcmVzaENvbW1lbnRzKCk6IHZvaWQgew0KICAgIGNvbnN0IGNvbW1lbnRzOiBJQ29tbWVudFtdID0gW107DQogICAgT2JqZWN0LnZhbHVlcyhBcnRpY2xlLmNvbW1lbnRzQ2FjaGVbdGhpcy5zbHVnXSB8fCBbXSk/LmZvckVhY2goY29tbWVudCA9PiB7DQogICAgICBpZiAoQXJ0aWNsZS5jb21tZW50c0NhY2hlW3RoaXMuc2x1Z10/Lltjb21tZW50LmlkXSkgew0KICAgICAgICBjb21tZW50cy5wdXNoKEFydGljbGUuY29tbWVudHNDYWNoZVt0aGlzLnNsdWddW2NvbW1lbnQuaWRdKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgICBjb21tZW50cy5zb3J0KChhLCBiKSA9PiAoYS5jcmVhdGVkQXQgPiBiLmNyZWF0ZWRBdCA/IDEgOiAtMSkpOw0KICAgIHRoaXMuY29tbWVudHMgPSBjb21tZW50czsNCiAgfQ0KDQogIEBXYXRjaCgic2x1ZyIsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIGFzeW5jIG9uU2x1Z0NoYW5nZShzbHVnOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHsNCiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgdHJ5IHsNCiAgICAgIGlmIChzbHVnKSB7DQogICAgICAgIGF3YWl0IEFydGljbGUuZmV0Y2hDb21tZW50cyhzbHVnKTsNCiAgICAgICAgdGhpcy5yZWZyZXNoQ29tbWVudHMoKTsNCiAgICAgIH0NCiAgICB9IGZpbmFsbHkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ArticleComments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleComments.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <common-loader v-if=\"isLoading\" />\r\n    <template v-else>\r\n      <comment-add :slug=\"slug\" @comment-added=\"refreshComments\" />\r\n      <comment-display\r\n        v-for=\"comment in comments\"\r\n        :key=\"comment.id\"\r\n        :comment=\"comment\"\r\n        :slug=\"slug\"\r\n        @comment-deleted=\"refreshComments\"\r\n      />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\r\n\r\nimport CommentAdd from \"@/components/CommentAdd.vue\";\r\nimport CommentDisplay from \"@/components/CommentDisplay.vue\";\r\nimport CommonLoader from \"@/components/CommonLoader.vue\";\r\nimport { IComment } from \"@/services/realWorldApi/models\";\r\nimport Article from \"@/store/modules/Article\";\r\n\r\n@Component({ components: { CommonLoader, CommentAdd, CommentDisplay } })\r\nexport default class ArticleComments extends Vue {\r\n  @Prop({ required: true }) slug!: string;\r\n\r\n  comments: IComment[] = [];\r\n  isLoading = false;\r\n\r\n  refreshComments(): void {\r\n    const comments: IComment[] = [];\r\n    Object.values(Article.commentsCache[this.slug] || [])?.forEach(comment => {\r\n      if (Article.commentsCache[this.slug]?.[comment.id]) {\r\n        comments.push(Article.commentsCache[this.slug][comment.id]);\r\n      }\r\n    });\r\n    comments.sort((a, b) => (a.createdAt > b.createdAt ? 1 : -1));\r\n    this.comments = comments;\r\n  }\r\n\r\n  @Watch(\"slug\", { immediate: true })\r\n  async onSlugChange(slug: string): Promise<void> {\r\n    this.isLoading = true;\r\n    try {\r\n      if (slug) {\r\n        await Article.fetchComments(slug);\r\n        this.refreshComments();\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}