{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\CommentAdd.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\CommentAdd.vue","mtime":1654014379713},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOw0KDQppbXBvcnQgQ29tbW9uRXJyb3JzTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uRXJyb3JzTGlzdC52dWUiOw0KaW1wb3J0IEFydGljbGUgZnJvbSAiQC9zdG9yZS9tb2R1bGVzL0FydGljbGUiOw0KaW1wb3J0IFVzZXIgZnJvbSAiQC9zdG9yZS9tb2R1bGVzL1VzZXIiOw0KaW1wb3J0IHsgaXNBcnJheU9mU3RyaW5ncyB9IGZyb20gIkAvdXRpbHMvQXJyYXlVdGlscyI7DQppbXBvcnQgeyBub3RpZnlTdWNjZXNzIH0gZnJvbSAiQC91dGlscy9Ob3RpZmljYXRpb25VdGlscyI7DQoNCkBDb21wb25lbnQoeyBjb21wb25lbnRzOiB7IENvbW1vbkVycm9yc0xpc3QgfSB9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWVudEFkZCBleHRlbmRzIFZ1ZSB7DQogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUgfSkgc2x1ZyE6IHN0cmluZzsNCg0KICBib2R5ID0gIiI7DQogIGVycm9yczogc3RyaW5nW10gPSBbXTsNCiAgaXNMb2FkaW5nID0gZmFsc2U7DQoNCiAgZ2V0IHVzZXJJbWFnZSgpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHsNCiAgICByZXR1cm4gVXNlci5jdXJyZW50VXNlcj8uaW1hZ2U7DQogIH0NCg0KICBnZXQgaXNMb2dnZWRJbigpOiBib29sZWFuIHsNCiAgICByZXR1cm4gVXNlci5pc0xvZ2dlZEluOw0KICB9DQoNCiAgYXN5bmMgYWRkQ29tbWVudCgpOiBQcm9taXNlPHZvaWQ+IHsNCiAgICB0aGlzLmVycm9ycyA9IFtdOw0KDQogICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOw0KICAgIHRyeSB7DQogICAgICBhd2FpdCBBcnRpY2xlLmFkZENvbW1lbnQoew0KICAgICAgICBzbHVnOiB0aGlzLnNsdWcsDQogICAgICAgIHBhcmFtczogeyBib2R5OiB0aGlzLmJvZHkgfQ0KICAgICAgfSk7DQogICAgICB0aGlzLiRlbWl0KCJjb21tZW50LWFkZGVkIik7DQogICAgICB0aGlzLmJvZHkgPSAiIjsNCiAgICAgIG5vdGlmeVN1Y2Nlc3MoIkNvbW1lbnQgaXMgYWRkZWQgc3VjZXNzZnVsbHkiKTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBpZiAoaXNBcnJheU9mU3RyaW5ncyhlKSkgew0KICAgICAgICB0aGlzLmVycm9ycyA9IGU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aHJvdyBlOw0KICAgICAgfQ0KICAgIH0gZmluYWxseSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["CommentAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentAdd.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div v-if=\"!isLoggedIn\">\r\n    <router-link :to=\"{ name: $routesNames.authLogin }\">Sign in</router-link>\r\n    or\r\n    <router-link :to=\"{ name: $routesNames.authRegister }\">sign up</router-link>\r\n    to add comments on this article.\r\n  </div>\r\n  <div v-else>\r\n    <common-errors-list :errors=\"errors\" />\r\n    <form class=\"card comment-form\">\r\n      <div class=\"card-block\">\r\n        <textarea\r\n          v-model=\"body\"\r\n          :disabled=\"isLoading\"\r\n          class=\"form-control\"\r\n          placeholder=\"Write a comment...\"\r\n          rows=\"3\"\r\n        ></textarea>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        <img :src=\"userImage\" class=\"comment-author-img\" />\r\n        <button\r\n          class=\"btn btn-sm btn-primary\"\r\n          :disabled=\"isLoading\"\r\n          @click=\"addComment\"\r\n        >\r\n          Post Comment\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\r\n\r\nimport CommonErrorsList from \"@/components/CommonErrorsList.vue\";\r\nimport Article from \"@/store/modules/Article\";\r\nimport User from \"@/store/modules/User\";\r\nimport { isArrayOfStrings } from \"@/utils/ArrayUtils\";\r\nimport { notifySuccess } from \"@/utils/NotificationUtils\";\r\n\r\n@Component({ components: { CommonErrorsList } })\r\nexport default class CommentAdd extends Vue {\r\n  @Prop({ required: true }) slug!: string;\r\n\r\n  body = \"\";\r\n  errors: string[] = [];\r\n  isLoading = false;\r\n\r\n  get userImage(): string | null | undefined {\r\n    return User.currentUser?.image;\r\n  }\r\n\r\n  get isLoggedIn(): boolean {\r\n    return User.isLoggedIn;\r\n  }\r\n\r\n  async addComment(): Promise<void> {\r\n    this.errors = [];\r\n\r\n    this.isLoading = true;\r\n    try {\r\n      await Article.addComment({\r\n        slug: this.slug,\r\n        params: { body: this.body }\r\n      });\r\n      this.$emit(\"comment-added\");\r\n      this.body = \"\";\r\n      notifySuccess(\"Comment is added sucessfully\");\r\n    } catch (e) {\r\n      if (isArrayOfStrings(e)) {\r\n        this.errors = e;\r\n      } else {\r\n        throw e;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}