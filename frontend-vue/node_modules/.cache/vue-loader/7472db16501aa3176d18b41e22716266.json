{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ArticleEdit.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ArticleEdit.vue","mtime":1654014379738},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7DQoNCmltcG9ydCBBcnRpY2xlRWRpdG9yIGZyb20gIkAvY29tcG9uZW50cy9BcnRpY2xlRWRpdG9yLnZ1ZSI7DQppbXBvcnQgQ29tbW9uTG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25Mb2FkZXIudnVlIjsNCmltcG9ydCB7IExvY2F0aW9uIH0gZnJvbSAiQC9yb3V0ZXIiOw0KaW1wb3J0IHsgSUFydGljbGUgfSBmcm9tICJAL3NlcnZpY2VzL3JlYWxXb3JsZEFwaS9tb2RlbHMiOw0KaW1wb3J0IEFydGljbGUgZnJvbSAiQC9zdG9yZS9tb2R1bGVzL0FydGljbGUiOw0KDQpDb21wb25lbnQucmVnaXN0ZXJIb29rcyhbImJlZm9yZVJvdXRlRW50ZXIiLCAiYmVmb3JlUm91dGVVcGRhdGUiXSk7DQoNCkBDb21wb25lbnQoew0KICBjb21wb25lbnRzOiB7DQogICAgQ29tbW9uTG9hZGVyLA0KICAgIEFydGljbGVFZGl0b3INCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFydGljbGVFZGl0IGV4dGVuZHMgVnVlIHsNCiAgaXNMb2FkaW5nID0gZmFsc2U7DQogIGFydGljbGU6IElBcnRpY2xlIHwgbnVsbCA9IG51bGw7DQoNCiAgYmVmb3JlUm91dGVFbnRlcih0bzogTG9jYXRpb24sIGZyb206IExvY2F0aW9uLCBuZXh0OiBGdW5jdGlvbik6IHZvaWQgew0KICAgIG5leHQoKHZtOiBBcnRpY2xlRWRpdCkgPT4gew0KICAgICAgdm0ub25Sb3V0ZVVwZGF0ZSh0bywgZnJvbSwgbmV4dCk7DQogICAgfSk7DQogIH0NCiAgYmVmb3JlUm91dGVVcGRhdGUodG86IExvY2F0aW9uLCBmcm9tOiBMb2NhdGlvbiwgbmV4dDogRnVuY3Rpb24pOiB2b2lkIHsNCiAgICB0aGlzLm9uUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpOw0KICB9DQoNCiAgYXN5bmMgb25Sb3V0ZVVwZGF0ZSgNCiAgICB0bzogTG9jYXRpb24sDQogICAgZnJvbTogTG9jYXRpb24sDQogICAgbmV4dDogRnVuY3Rpb24NCiAgKTogUHJvbWlzZTx2b2lkPiB7DQogICAgbmV4dCgpOw0KICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsNCiAgICB0cnkgew0KICAgICAgY29uc3QgdG9TbHVnID0gdG8/LnBhcmFtcz8uc2x1ZzsNCiAgICAgIGNvbnN0IGZyb21TbHVnID0gZnJvbT8ucGFyYW1zPy5zbHVnOw0KICAgICAgaWYgKCF0b1NsdWcpIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiB0aGlzLiRyb3V0ZXNOYW1lcy5ob21lIH0pOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodG9TbHVnICE9PSBmcm9tU2x1ZyB8fCAhdGhpcy5hcnRpY2xlKSB7DQogICAgICAgIGF3YWl0IEFydGljbGUuZmV0Y2hTaW5nbGUodG9TbHVnKTsNCiAgICAgICAgdGhpcy5hcnRpY2xlID0gQXJ0aWNsZS5hcnRpY2xlc0NhY2hlW3RvU2x1Z107DQogICAgICB9DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiB0aGlzLiRyb3V0ZXNOYW1lcy5ob21lIH0pOw0KICAgIH0gZmluYWxseSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ArticleEdit.vue"],"names":[],"mappings":";;;;;;AAMA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <common-loader v-if=\"isLoading\" />\r\n  <article-editor v-else :article=\"article\" />\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\n\r\nimport ArticleEditor from \"@/components/ArticleEditor.vue\";\r\nimport CommonLoader from \"@/components/CommonLoader.vue\";\r\nimport { Location } from \"@/router\";\r\nimport { IArticle } from \"@/services/realWorldApi/models\";\r\nimport Article from \"@/store/modules/Article\";\r\n\r\nComponent.registerHooks([\"beforeRouteEnter\", \"beforeRouteUpdate\"]);\r\n\r\n@Component({\r\n  components: {\r\n    CommonLoader,\r\n    ArticleEditor\r\n  }\r\n})\r\nexport default class ArticleEdit extends Vue {\r\n  isLoading = false;\r\n  article: IArticle | null = null;\r\n\r\n  beforeRouteEnter(to: Location, from: Location, next: Function): void {\r\n    next((vm: ArticleEdit) => {\r\n      vm.onRouteUpdate(to, from, next);\r\n    });\r\n  }\r\n  beforeRouteUpdate(to: Location, from: Location, next: Function): void {\r\n    this.onRouteUpdate(to, from, next);\r\n  }\r\n\r\n  async onRouteUpdate(\r\n    to: Location,\r\n    from: Location,\r\n    next: Function\r\n  ): Promise<void> {\r\n    next();\r\n    this.isLoading = true;\r\n    try {\r\n      const toSlug = to?.params?.slug;\r\n      const fromSlug = from?.params?.slug;\r\n      if (!toSlug) {\r\n        this.$router.push({ name: this.$routesNames.home });\r\n        return;\r\n      }\r\n      if (toSlug !== fromSlug || !this.article) {\r\n        await Article.fetchSingle(toSlug);\r\n        this.article = Article.articlesCache[toSlug];\r\n      }\r\n    } catch (e) {\r\n      this.$router.push({ name: this.$routesNames.home });\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}