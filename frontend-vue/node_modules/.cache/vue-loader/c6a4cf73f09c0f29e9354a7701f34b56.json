{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\ArticleEditor.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\components\\ArticleEditor.vue","mtime":1654014379706},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsNCg0KaW1wb3J0IENvbW1vbkVycm9yc0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL0NvbW1vbkVycm9yc0xpc3QudnVlIjsNCmltcG9ydCB7IElBcnRpY2xlIH0gZnJvbSAiQC9zZXJ2aWNlcy9yZWFsV29ybGRBcGkvbW9kZWxzIjsNCmltcG9ydCBBcnRpY2xlIGZyb20gIkAvc3RvcmUvbW9kdWxlcy9BcnRpY2xlIjsNCmltcG9ydCB7IGlzQXJyYXlPZlN0cmluZ3MgfSBmcm9tICJAL3V0aWxzL0FycmF5VXRpbHMiOw0KaW1wb3J0IHsgbm90aWZ5U3VjY2VzcyB9IGZyb20gIkAvdXRpbHMvTm90aWZpY2F0aW9uVXRpbHMiOw0KDQpAQ29tcG9uZW50KHsNCiAgY29tcG9uZW50czogew0KICAgIENvbW1vbkVycm9yc0xpc3QNCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFydGljbGVFZGl0b3IgZXh0ZW5kcyBWdWUgew0KICBAUHJvcCgpIHJlYWRvbmx5IGFydGljbGU6IElBcnRpY2xlIHwgdW5kZWZpbmVkOw0KDQogIGlzTG9hZGluZyA9IGZhbHNlOw0KICB0aXRsZSA9IHRoaXMuYXJ0aWNsZT8udGl0bGUgfHwgIiI7DQogIGRlc2NyaXB0aW9uID0gdGhpcy5hcnRpY2xlPy5kZXNjcmlwdGlvbiB8fCAiIjsNCiAgYm9keSA9IHRoaXMuYXJ0aWNsZT8uYm9keSB8fCAiIjsNCiAgdGFnTGlzdCA9ICIiOw0KICBleGlzdGluZ1RhZ0xpc3Q6IHN0cmluZ1tdID0gdGhpcy5hcnRpY2xlPy50YWdMaXN0Py5zbGljZSgpIHx8IFtdOw0KICBlcnJvcnM6IHN0cmluZ1tdID0gW107DQoNCiAgcmVtb3ZlVGFnKHRhZzogc3RyaW5nKTogdm9pZCB7DQogICAgY29uc3QgaW5kZXggPSB0aGlzLmV4aXN0aW5nVGFnTGlzdC5pbmRleE9mKHRhZyk7DQogICAgdGhpcy5leGlzdGluZ1RhZ0xpc3Quc3BsaWNlKGluZGV4LCAxKTsNCiAgfQ0KDQogIGFzeW5jIHB1Ymxpc2goKTogUHJvbWlzZTx2b2lkPiB7DQogICAgdGhpcy5lcnJvcnMgPSBbXTsNCg0KICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsNCiAgICB0cnkgew0KICAgICAgbGV0IGFydGljbGU7DQogICAgICBpZiAodGhpcy5hcnRpY2xlKSB7DQogICAgICAgIGxldCBuZXdUYWdzTGlzdCA9IHRoaXMuZXhpc3RpbmdUYWdMaXN0LnNsaWNlKCk7DQogICAgICAgIGlmICh0aGlzLnRhZ0xpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAgIG5ld1RhZ3NMaXN0ID0gbmV3VGFnc0xpc3QuY29uY2F0KHRoaXMudGFnTGlzdC5zcGxpdCgiLCIpKTsNCiAgICAgICAgfQ0KICAgICAgICBhcnRpY2xlID0gYXdhaXQgQXJ0aWNsZS51cGRhdGUoew0KICAgICAgICAgIHNsdWc6IHRoaXMuYXJ0aWNsZS5zbHVnLA0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsDQogICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwNCiAgICAgICAgICAgIGJvZHk6IHRoaXMuYm9keSwNCiAgICAgICAgICAgIHRhZ0xpc3Q6IG5ld1RhZ3NMaXN0DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgbm90aWZ5U3VjY2VzcygiQXJ0aWNsZSB3YXMgc3VjY2Vzc2Z1bGx5IGVkaXRlZCwgcmVkaXJlY3RpbmcuLi4iKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFydGljbGUgPSBhd2FpdCBBcnRpY2xlLmNyZWF0ZSh7DQogICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsDQogICAgICAgICAgYm9keTogdGhpcy5ib2R5LA0KICAgICAgICAgIHRhZ0xpc3Q6IHRoaXMudGFnTGlzdC5zcGxpdCgiLCIpLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uDQogICAgICAgIH0pOw0KICAgICAgICBub3RpZnlTdWNjZXNzKCJBcnRpY2xlIHdhcyBzdWNjZXNzZnVsbHkgY3JlYXRlZCwgcmVkaXJlY3RpbmcuLi4iKTsNCiAgICAgIH0NCg0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiB0aGlzLiRyb3V0ZXNOYW1lcy5hcnRpY2xlVmlldywNCiAgICAgICAgcGFyYW1zOiB7IHNsdWc6IGFydGljbGUuc2x1ZyB9DQogICAgICB9KTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBpZiAoaXNBcnJheU9mU3RyaW5ncyhlKSkgew0KICAgICAgICB0aGlzLmVycm9ycyA9IGU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aHJvdyBlOw0KICAgICAgfQ0KICAgIH0gZmluYWxseSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ArticleEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleEditor.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"editor-page\">\r\n    <div class=\"container page\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-10 offset-md-1 col-xs-12\">\r\n          <common-errors-list :errors=\"errors\" />\r\n\r\n          <form>\r\n            <fieldset :disabled=\"isLoading\">\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"title\"\r\n                  type=\"text\"\r\n                  class=\"form-control form-control-lg\"\r\n                  placeholder=\"Article Title\"\r\n                  required=\"true\"\r\n                />\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"description\"\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"What's this article about?\"\r\n                  required=\"true\"\r\n                />\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <textarea\r\n                  v-model=\"body\"\r\n                  class=\"form-control\"\r\n                  rows=\"8\"\r\n                  placeholder=\"Write your article (in markdown)\"\r\n                  required=\"true\"\r\n                ></textarea>\r\n              </fieldset>\r\n              <fieldset class=\"form-group\">\r\n                <input\r\n                  v-model=\"tagList\"\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Enter tags\"\r\n                  required=\"true\"\r\n                />\r\n                <div class=\"tag-list\">\r\n                  <span\r\n                    v-for=\"tag in existingTagList\"\r\n                    :key=\"tag\"\r\n                    class=\"tag-default tag-pill ng-binding ng-scope\"\r\n                  >\r\n                    <i class=\"ion-close-round\" @click=\"removeTag(tag)\"></i>\r\n                    {{ tag }}\r\n                  </span>\r\n                </div>\r\n              </fieldset>\r\n              <button\r\n                class=\"btn btn-lg pull-xs-right btn-primary\"\r\n                type=\"button\"\r\n                @click=\"publish\"\r\n              >\r\n                Publish Article\r\n              </button>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\r\n\r\nimport CommonErrorsList from \"@/components/CommonErrorsList.vue\";\r\nimport { IArticle } from \"@/services/realWorldApi/models\";\r\nimport Article from \"@/store/modules/Article\";\r\nimport { isArrayOfStrings } from \"@/utils/ArrayUtils\";\r\nimport { notifySuccess } from \"@/utils/NotificationUtils\";\r\n\r\n@Component({\r\n  components: {\r\n    CommonErrorsList\r\n  }\r\n})\r\nexport default class ArticleEditor extends Vue {\r\n  @Prop() readonly article: IArticle | undefined;\r\n\r\n  isLoading = false;\r\n  title = this.article?.title || \"\";\r\n  description = this.article?.description || \"\";\r\n  body = this.article?.body || \"\";\r\n  tagList = \"\";\r\n  existingTagList: string[] = this.article?.tagList?.slice() || [];\r\n  errors: string[] = [];\r\n\r\n  removeTag(tag: string): void {\r\n    const index = this.existingTagList.indexOf(tag);\r\n    this.existingTagList.splice(index, 1);\r\n  }\r\n\r\n  async publish(): Promise<void> {\r\n    this.errors = [];\r\n\r\n    this.isLoading = true;\r\n    try {\r\n      let article;\r\n      if (this.article) {\r\n        let newTagsList = this.existingTagList.slice();\r\n        if (this.tagList.length > 0) {\r\n          newTagsList = newTagsList.concat(this.tagList.split(\",\"));\r\n        }\r\n        article = await Article.update({\r\n          slug: this.article.slug,\r\n          params: {\r\n            title: this.title,\r\n            description: this.description,\r\n            body: this.body,\r\n            tagList: newTagsList\r\n          }\r\n        });\r\n        notifySuccess(\"Article was successfully edited, redirecting...\");\r\n      } else {\r\n        article = await Article.create({\r\n          title: this.title,\r\n          body: this.body,\r\n          tagList: this.tagList.split(\",\"),\r\n          description: this.description\r\n        });\r\n        notifySuccess(\"Article was successfully created, redirecting...\");\r\n      }\r\n\r\n      this.$router.push({\r\n        name: this.$routesNames.articleView,\r\n        params: { slug: article.slug }\r\n      });\r\n    } catch (e) {\r\n      if (isArrayOfStrings(e)) {\r\n        this.errors = e;\r\n      } else {\r\n        throw e;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}