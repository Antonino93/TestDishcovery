{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\Home.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\Home.vue","mtime":1654014379738},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7DQoNCmltcG9ydCBDb21tb25GZWVkLCB7IElGZWVkVGFiIH0gZnJvbSAiQC9jb21wb25lbnRzL0NvbW1vbkZlZWQudnVlIjsNCmltcG9ydCBIb21lQmFubmVyIGZyb20gIkAvY29tcG9uZW50cy9Ib21lQmFubmVyLnZ1ZSI7DQppbXBvcnQgSG9tZVRhZ3MgZnJvbSAiQC9jb21wb25lbnRzL0hvbWVUYWdzLnZ1ZSI7DQppbXBvcnQgSVBhZ2luYXRpb24sIHsNCiAgREVGQVVMVF9JVEVNU19QRVJfUEFHRSwNCiAgREVGQVVMVF9TVEFSVF9QQUdFDQp9IGZyb20gIkAvc2VydmljZXMvY29tbW9uL0lQYWdpbmF0aW9uIjsNCmltcG9ydCB7IElBcnRpY2xlTGlzdCB9IGZyb20gIkAvc2VydmljZXMvcmVhbFdvcmxkQXBpL21vZGVscyI7DQppbXBvcnQgQXJ0aWNsZSBmcm9tICJAL3N0b3JlL21vZHVsZXMvQXJ0aWNsZSI7DQppbXBvcnQgVXNlciBmcm9tICJAL3N0b3JlL21vZHVsZXMvVXNlciI7DQoNCmVudW0gRmVlZFR5cGUgew0KICBHbG9iYWwgPSAiR2xvYmFsIiwNCiAgTXkgPSAiTXkiLA0KICBUYWcgPSAiVGFnIg0KfQ0KDQpAQ29tcG9uZW50KHsNCiAgY29tcG9uZW50czogew0KICAgIEhvbWVCYW5uZXIsDQogICAgSG9tZVRhZ3MsDQogICAgQ29tbW9uRmVlZA0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZSBleHRlbmRzIFZ1ZSB7DQogIGZlZWRUeXBlczogdHlwZW9mIEZlZWRUeXBlID0gRmVlZFR5cGU7DQogIGlzTG9hZGluZyA9IGZhbHNlOw0KICBjdXJyZW50UGFnZSA9IERFRkFVTFRfU1RBUlRfUEFHRTsNCiAgaXRlbXNQZXJQYWdlID0gREVGQVVMVF9JVEVNU19QRVJfUEFHRTsNCg0KICBhY3RpdmVUYWJJZDogRmVlZFR5cGUgPSBGZWVkVHlwZS5NeTsNCiAgYWN0aXZlRmVlZDogSUFydGljbGVMaXN0ID0geyBhcnRpY2xlczogW10sIGFydGljbGVzQ291bnQ6IDAgfTsNCiAgYWN0aXZlVGFnOiBzdHJpbmcgfCBudWxsID0gbnVsbDsNCg0KICBnZXQgaXNMb2dnZWRJbigpOiBib29sZWFuIHsNCiAgICByZXR1cm4gVXNlci5pc0xvZ2dlZEluOw0KICB9DQoNCiAgZ2V0IHRhYnMoKTogSUZlZWRUYWJbXSB7DQogICAgY29uc3QgcmVzOiBJRmVlZFRhYltdID0gW107DQoNCiAgICBpZiAodGhpcy5pc0xvZ2dlZEluKSB7DQogICAgICByZXMucHVzaCh7DQogICAgICAgIGlkOiBGZWVkVHlwZS5NeSwNCiAgICAgICAgdGl0bGU6ICJZb3VyIEZlZWQiDQogICAgICB9KTsNCiAgICB9DQoNCiAgICByZXMucHVzaCh7DQogICAgICBpZDogRmVlZFR5cGUuR2xvYmFsLA0KICAgICAgdGl0bGU6ICJHbG9iYWwgRmVlZCINCiAgICB9KTsNCg0KICAgIGlmICh0aGlzLmFjdGl2ZVRhZyAmJiB0aGlzLmFjdGl2ZVRhYklkID09PSBGZWVkVHlwZS5UYWcpIHsNCiAgICAgIHJlcy5wdXNoKHsNCiAgICAgICAgaWQ6IEZlZWRUeXBlLlRhZywNCiAgICAgICAgdGl0bGU6IGAjJHt0aGlzLmFjdGl2ZVRhZ31gDQogICAgICB9KTsNCiAgICB9DQogICAgcmV0dXJuIHJlczsNCiAgfQ0KDQogIGFzeW5jIG1vdW50ZWQoKTogUHJvbWlzZTx2b2lkPiB7DQogICAgdGhpcy5hY3RpdmVUYWJJZCA9IHRoaXMuaXNMb2dnZWRJbiA/IEZlZWRUeXBlLk15IDogRmVlZFR5cGUuR2xvYmFsOw0KICAgIGF3YWl0IHRoaXMuZmV0Y2hGZWVkKCk7DQogIH0NCg0KICBhc3luYyBvblRhYkNoYW5nZWQodGFiSWQ6IEZlZWRUeXBlKTogUHJvbWlzZTx2b2lkPiB7DQogICAgc3dpdGNoICh0YWJJZCkgew0KICAgICAgY2FzZSBGZWVkVHlwZS5NeToNCiAgICAgIGNhc2UgRmVlZFR5cGUuR2xvYmFsOg0KICAgICAgICB0aGlzLmFjdGl2ZVRhYklkID0gdGFiSWQ7DQogICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBERUZBVUxUX1NUQVJUX1BBR0U7DQogICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hGZWVkKCk7DQogICAgICAgIGJyZWFrOw0KICAgICAgY2FzZSBGZWVkVHlwZS5UYWc6DQogICAgICAgIGF3YWl0IHRoaXMub25UYWdGZWVkQWN0aXZhdGVkKHRoaXMuYWN0aXZlVGFnIHx8ICIiKTsNCiAgICAgICAgYnJlYWs7DQoNCiAgICAgIGRlZmF1bHQ6DQogICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0YWJJZDogJHt0YWJJZH1gKTsNCiAgICB9DQogIH0NCg0KICBhc3luYyBvblRhZ0ZlZWRBY3RpdmF0ZWQodGFnOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHsNCiAgICB0aGlzLmFjdGl2ZVRhYklkID0gRmVlZFR5cGUuVGFnOw0KICAgIHRoaXMuY3VycmVudFBhZ2UgPSBERUZBVUxUX1NUQVJUX1BBR0U7DQogICAgdGhpcy5hY3RpdmVUYWcgPSB0YWc7DQogICAgYXdhaXQgdGhpcy5mZXRjaEZlZWQoKTsNCiAgfQ0KDQogIGFzeW5jIG9uUGFnZUNoYW5nZWQocGFnZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7DQogICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgYXdhaXQgdGhpcy5mZXRjaEZlZWQoKTsNCiAgfQ0KDQogIGFzeW5jIGZldGNoRmVlZCgpOiBQcm9taXNlPHZvaWQ+IHsNCiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgdHJ5IHsNCiAgICAgIGNvbnN0IHBhZ2luYXRpb246IElQYWdpbmF0aW9uID0gew0KICAgICAgICBsaW1pdDogdGhpcy5pdGVtc1BlclBhZ2UsDQogICAgICAgIG9mZnNldDogKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMuaXRlbXNQZXJQYWdlDQogICAgICB9Ow0KDQogICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlVGFiSWQpIHsNCiAgICAgICAgY2FzZSBGZWVkVHlwZS5HbG9iYWw6DQogICAgICAgICAgdGhpcy5hY3RpdmVGZWVkID0gYXdhaXQgQXJ0aWNsZS5nZXRMaXN0KHsgLi4ucGFnaW5hdGlvbiB9KTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSBGZWVkVHlwZS5UYWc6DQogICAgICAgICAgdGhpcy5hY3RpdmVGZWVkID0gYXdhaXQgQXJ0aWNsZS5nZXRMaXN0KHsNCiAgICAgICAgICAgIHRhZzogdGhpcy5hY3RpdmVUYWcgYXMgc3RyaW5nLA0KICAgICAgICAgICAgLi4ucGFnaW5hdGlvbg0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIEZlZWRUeXBlLk15Og0KICAgICAgICAgIHRoaXMuYWN0aXZlRmVlZCA9IGF3YWl0IEFydGljbGUuZ2V0RmVlZChwYWdpbmF0aW9uKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9IGZpbmFsbHkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"home-page\">\r\n    <home-banner />\r\n    <div class=\"container page\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-9\">\r\n          <common-feed\r\n            :tabs=\"tabs\"\r\n            :active-tab-id=\"activeTabId\"\r\n            :is-loading=\"isLoading\"\r\n            :feed=\"activeFeed\"\r\n            :items-per-page=\"itemsPerPage\"\r\n            :current-page=\"currentPage\"\r\n            @page-changed=\"onPageChanged\"\r\n            @tab-changed=\"onTabChanged\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"col-md-3\">\r\n          <home-tags @tag-selected=\"onTagFeedActivated\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\n\r\nimport CommonFeed, { IFeedTab } from \"@/components/CommonFeed.vue\";\r\nimport HomeBanner from \"@/components/HomeBanner.vue\";\r\nimport HomeTags from \"@/components/HomeTags.vue\";\r\nimport IPagination, {\r\n  DEFAULT_ITEMS_PER_PAGE,\r\n  DEFAULT_START_PAGE\r\n} from \"@/services/common/IPagination\";\r\nimport { IArticleList } from \"@/services/realWorldApi/models\";\r\nimport Article from \"@/store/modules/Article\";\r\nimport User from \"@/store/modules/User\";\r\n\r\nenum FeedType {\r\n  Global = \"Global\",\r\n  My = \"My\",\r\n  Tag = \"Tag\"\r\n}\r\n\r\n@Component({\r\n  components: {\r\n    HomeBanner,\r\n    HomeTags,\r\n    CommonFeed\r\n  }\r\n})\r\nexport default class Home extends Vue {\r\n  feedTypes: typeof FeedType = FeedType;\r\n  isLoading = false;\r\n  currentPage = DEFAULT_START_PAGE;\r\n  itemsPerPage = DEFAULT_ITEMS_PER_PAGE;\r\n\r\n  activeTabId: FeedType = FeedType.My;\r\n  activeFeed: IArticleList = { articles: [], articlesCount: 0 };\r\n  activeTag: string | null = null;\r\n\r\n  get isLoggedIn(): boolean {\r\n    return User.isLoggedIn;\r\n  }\r\n\r\n  get tabs(): IFeedTab[] {\r\n    const res: IFeedTab[] = [];\r\n\r\n    if (this.isLoggedIn) {\r\n      res.push({\r\n        id: FeedType.My,\r\n        title: \"Your Feed\"\r\n      });\r\n    }\r\n\r\n    res.push({\r\n      id: FeedType.Global,\r\n      title: \"Global Feed\"\r\n    });\r\n\r\n    if (this.activeTag && this.activeTabId === FeedType.Tag) {\r\n      res.push({\r\n        id: FeedType.Tag,\r\n        title: `#${this.activeTag}`\r\n      });\r\n    }\r\n    return res;\r\n  }\r\n\r\n  async mounted(): Promise<void> {\r\n    this.activeTabId = this.isLoggedIn ? FeedType.My : FeedType.Global;\r\n    await this.fetchFeed();\r\n  }\r\n\r\n  async onTabChanged(tabId: FeedType): Promise<void> {\r\n    switch (tabId) {\r\n      case FeedType.My:\r\n      case FeedType.Global:\r\n        this.activeTabId = tabId;\r\n        this.currentPage = DEFAULT_START_PAGE;\r\n        await this.fetchFeed();\r\n        break;\r\n      case FeedType.Tag:\r\n        await this.onTagFeedActivated(this.activeTag || \"\");\r\n        break;\r\n\r\n      default:\r\n        throw new Error(`Unexpected tabId: ${tabId}`);\r\n    }\r\n  }\r\n\r\n  async onTagFeedActivated(tag: string): Promise<void> {\r\n    this.activeTabId = FeedType.Tag;\r\n    this.currentPage = DEFAULT_START_PAGE;\r\n    this.activeTag = tag;\r\n    await this.fetchFeed();\r\n  }\r\n\r\n  async onPageChanged(page: number): Promise<void> {\r\n    this.currentPage = page;\r\n    await this.fetchFeed();\r\n  }\r\n\r\n  async fetchFeed(): Promise<void> {\r\n    this.isLoading = true;\r\n    try {\r\n      const pagination: IPagination = {\r\n        limit: this.itemsPerPage,\r\n        offset: (this.currentPage - 1) * this.itemsPerPage\r\n      };\r\n\r\n      switch (this.activeTabId) {\r\n        case FeedType.Global:\r\n          this.activeFeed = await Article.getList({ ...pagination });\r\n          break;\r\n        case FeedType.Tag:\r\n          this.activeFeed = await Article.getList({\r\n            tag: this.activeTag as string,\r\n            ...pagination\r\n          });\r\n          break;\r\n        case FeedType.My:\r\n          this.activeFeed = await Article.getFeed(pagination);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}