{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts","mtime":1654014379722},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgcm91dGVzTmFtZXMgZnJvbSAiQC9yb3V0ZXIvcm91dGVzTmFtZXMiOwppbXBvcnQgSHR0cFN0YXR1c0NvZGVzIGZyb20gIkAvc2VydmljZXMvY29tbW9uL0h0dHBTdGF0dXNDb2RlcyI7CmltcG9ydCBVc2VyIGZyb20gIkAvc3RvcmUvbW9kdWxlcy9Vc2VyIjsKaW1wb3J0IHsgbm90aWZ5RXJyb3JzLCBub3RpZnlXYXJuIH0gZnJvbSAiQC91dGlscy9Ob3RpZmljYXRpb25VdGlscyI7CmltcG9ydCB7IHRyYW5zZm9ybUVycm9ycyB9IGZyb20gIi4vVXRpbHMiOwoKdmFyIEF1dGhJbnRlcmNlcHRvciA9IGZ1bmN0aW9uIEF1dGhJbnRlcmNlcHRvcihjb25maWcpIHsKICB2YXIgYWNjZXNzVG9rZW4gPSBVc2VyLmF1dGhUb2tlbjsKICBpZiAoYWNjZXNzVG9rZW4pIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiVG9rZW4gIi5jb25jYXQoYWNjZXNzVG9rZW4pOwogIHJldHVybiBjb25maWc7Cn07Cgp2YXIgT25SZXNwb25zZVN1Y2Nlc3MgPSBmdW5jdGlvbiBPblJlc3BvbnNlU3VjY2VzcyhyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZTsKfTsKCnZhciBPblJlc3BvbnNlRmFpbHVyZSA9IGZ1bmN0aW9uIE9uUmVzcG9uc2VGYWlsdXJlKGVycm9yKSB7CiAgdmFyIF9lcnJvciRyZXNwb25zZSwgX2Vycm9yJHJlc3BvbnNlMiwgX2Vycm9yJHJlc3BvbnNlMiRkYXRhOwoKICB2YXIgaHR0cFN0YXR1cyA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlLnN0YXR1czsKICB2YXIgZXJyb3JzID0gdHJhbnNmb3JtRXJyb3JzKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlMiA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlMiRkYXRhID0gX2Vycm9yJHJlc3BvbnNlMi5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UyJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZTIkZGF0YS5lcnJvcnMpOwogIHZhciBpc1Vua25vd25FcnJvciA9IGVycm9ycyA9PT0gbnVsbCB8fCBlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yc1swXS5zdGFydHNXaXRoKCJVbmtub3duIik7CgogIHN3aXRjaCAoaHR0cFN0YXR1cykgewogICAgY2FzZSBIdHRwU3RhdHVzQ29kZXMuVU5BVVRIT1JJWkVEOgogICAgICBVc2VyLmxvZ291dCgpOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogcm91dGVzTmFtZXMuYXV0aExvZ2luCiAgICAgIH0pOwogICAgICBub3RpZnlXYXJuKCJZb3UgYXJlIG5vdCBsb2dnZWQgaW4sIHBsZWFzZSBsb2dpbiBmaXJzdC4iKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSBIdHRwU3RhdHVzQ29kZXMuTk9UX0ZPVU5EOgogICAgICBub3RpZnlFcnJvcnMoKGVycm9ycyA9PT0gbnVsbCB8fCBlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9ycy5sZW5ndGgpID4gMCAmJiAhaXNVbmtub3duRXJyb3IgPyBlcnJvcnMgOiBbIlJlcXVlc3RlZCByZXNvdXJjZSB3YXMgbm90IGZvdW5kLiJdKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSBIdHRwU3RhdHVzQ29kZXMuRk9SQklEREVOOgogICAgICBub3RpZnlFcnJvcnMoKGVycm9ycyA9PT0gbnVsbCB8fCBlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9ycy5sZW5ndGgpID4gMCAmJiAhaXNVbmtub3duRXJyb3IgPyBlcnJvcnMgOiBbIkFjY2VzcyB0byB0aGlzIHJlc291cmNlIGlzIGZvcmJpZGRlbiJdKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSBIdHRwU3RhdHVzQ29kZXMuVU5QUk9DRVNTQUJMRV9FTlRJVFk6CiAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgYmUgaGFuZGxlZCBhdCB0aGUgZm9ybXMKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgbm90aWZ5RXJyb3JzKChlcnJvcnMgPT09IG51bGwgfHwgZXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvcnMubGVuZ3RoKSA+IDAgPyBlcnJvcnMgOiBbIlVua25vd24gZXJyb3Igb2NjdXJyZWQsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIl0pOwogICAgICBicmVhazsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcnMpOwp9OwoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX1JFQUxfV09STERfQVBJX1VSTCwKICB0aW1lb3V0OiA1MDAwCn0pOwppbnN0YW5jZS5kZWZhdWx0cy5oZWFkZXJzLmdldC5BY2NlcHRzID0gImFwcGxpY2F0aW9uL2pzb24iOwppbnN0YW5jZS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIl0gPSAiKiI7Cmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShBdXRoSW50ZXJjZXB0b3IpOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKE9uUmVzcG9uc2VTdWNjZXNzLCBPblJlc3BvbnNlRmFpbHVyZSk7CmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlOw=="},{"version":3,"sources":["C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts"],"names":[],"mappings":";;AAAA,OAAO,KAAP,MAAwE,OAAxE;AAEA,OAAO,MAAP,MAAmB,UAAnB;AACA,OAAO,WAAP,MAAwB,sBAAxB;AACA,OAAO,eAAP,MAA4B,mCAA5B;AACA,OAAO,IAAP,MAAiB,sBAAjB;AACA,SAAS,YAAT,EAAuB,UAAvB,QAAyC,2BAAzC;AAEA,SAAS,eAAT,QAAgC,SAAhC;;AAEA,IAAM,eAAe,GAAG,SAAlB,eAAkB,CAAC,MAAD,EAAmD;AACzE,MAAM,WAAW,GAAG,IAAI,CAAC,SAAzB;AACA,MAAI,WAAJ,EAAiB,MAAM,CAAC,OAAP,CAAe,aAAf,mBAAwC,WAAxC;AACjB,SAAO,MAAP;AACD,CAJD;;AAMA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,QAAD;AAAA,SACxB,QADwB;AAAA,CAA1B;;AAGA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,KAAD,EAA6B;AAAA;;AACrD,MAAM,UAAU,GAAG,KAAH,aAAG,KAAH,0CAAG,KAAK,CAAE,QAAV,oDAAG,gBAAiB,MAApC;AAEA,MAAM,MAAM,GAAG,eAAe,CAAC,KAAD,aAAC,KAAD,2CAAC,KAAK,CAAE,QAAR,8EAAC,iBAAiB,IAAlB,0DAAC,sBAAuB,MAAxB,CAA9B;AACA,MAAM,cAAc,GAAG,MAAH,aAAG,MAAH,uBAAG,MAAM,CAAG,CAAH,CAAN,CAAY,UAAZ,CAAuB,SAAvB,CAAvB;;AAEA,UAAQ,UAAR;AACE,SAAK,eAAe,CAAC,YAArB;AACE,MAAA,IAAI,CAAC,MAAL;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE,WAAW,CAAC;AAApB,OAAZ;AACA,MAAA,UAAU,CAAC,4CAAD,CAAV;AACA;;AACF,SAAK,eAAe,CAAC,SAArB;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,IAAsB,CAAC,cAAvB,GACI,MADJ,GAEI,CAAC,mCAAD,CAHM,CAAZ;AAKA;;AACF,SAAK,eAAe,CAAC,SAArB;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,IAAsB,CAAC,cAAvB,GACI,MADJ,GAEI,CAAC,sCAAD,CAHM,CAAZ;AAKA;;AACF,SAAK,eAAe,CAAC,oBAArB;AACE;AACA;;AACF;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,GACI,MADJ,GAEI,CAAC,iDAAD,CAHM,CAAZ;AAKA;AA7BJ;;AA+BA,SAAO,OAAO,CAAC,MAAR,CAAe,MAAf,CAAP;AACD,CAtCD;;AAwCA,IAAM,QAAQ,GAA4B,KAAK,CAAC,MAAN,CAAa;AACrD,EAAA,OAAO,EAAE,OAAO,CAAC,GAAR,CAAY,0BADgC;AAErD,EAAA,OAAO,EAAE;AAF4C,CAAb,CAA1C;AAKA,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,GAA1B,CAA8B,OAA9B,GAAwC,kBAAxC;AACA,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,MAA1B,CAAiC,6BAAjC,IAAkE,GAAlE;AAEA,QAAQ,CAAC,YAAT,CAAsB,OAAtB,CAA8B,GAA9B,CAAkC,eAAlC;AAEA,QAAQ,CAAC,YAAT,CAAsB,QAAtB,CAA+B,GAA/B,CAAmC,iBAAnC,EAAsD,iBAAtD;AAEA,eAAe,QAAf","sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from \"axios\";\r\n\r\nimport router from \"@/router\";\r\nimport routesNames from \"@/router/routesNames\";\r\nimport HttpStatusCodes from \"@/services/common/HttpStatusCodes\";\r\nimport User from \"@/store/modules/User\";\r\nimport { notifyErrors, notifyWarn } from \"@/utils/NotificationUtils\";\r\n\r\nimport { transformErrors } from \"./Utils\";\r\n\r\nconst AuthInterceptor = (config: AxiosRequestConfig): AxiosRequestConfig => {\r\n  const accessToken = User.authToken;\r\n  if (accessToken) config.headers.Authorization = `Token ${accessToken}`;\r\n  return config;\r\n};\r\n\r\nconst OnResponseSuccess = (response: AxiosResponse<any>): AxiosResponse<any> =>\r\n  response;\r\n\r\nconst OnResponseFailure = (error: any): Promise<any> => {\r\n  const httpStatus = error?.response?.status;\r\n\r\n  const errors = transformErrors(error?.response?.data?.errors);\r\n  const isUnknownError = errors?.[0].startsWith(\"Unknown\");\r\n\r\n  switch (httpStatus) {\r\n    case HttpStatusCodes.UNAUTHORIZED:\r\n      User.logout();\r\n      router.push({ name: routesNames.authLogin });\r\n      notifyWarn(\"You are not logged in, please login first.\");\r\n      break;\r\n    case HttpStatusCodes.NOT_FOUND:\r\n      notifyErrors(\r\n        errors?.length > 0 && !isUnknownError\r\n          ? errors\r\n          : [\"Requested resource was not found.\"]\r\n      );\r\n      break;\r\n    case HttpStatusCodes.FORBIDDEN:\r\n      notifyErrors(\r\n        errors?.length > 0 && !isUnknownError\r\n          ? errors\r\n          : [\"Access to this resource is forbidden\"]\r\n      );\r\n      break;\r\n    case HttpStatusCodes.UNPROCESSABLE_ENTITY:\r\n      // This case should be handled at the forms\r\n      break;\r\n    default:\r\n      notifyErrors(\r\n        errors?.length > 0\r\n          ? errors\r\n          : [\"Unknown error occurred, please try again later.\"]\r\n      );\r\n      break;\r\n  }\r\n  return Promise.reject(errors);\r\n};\r\n\r\nconst instance: Readonly<AxiosInstance> = axios.create({\r\n  baseURL: process.env.VUE_APP_REAL_WORLD_API_URL,\r\n  timeout: 5000\r\n});\r\n\r\ninstance.defaults.headers.get.Accepts = \"application/json\";\r\ninstance.defaults.headers.common[\"Access-Control-Allow-Origin\"] = \"*\";\r\n\r\ninstance.interceptors.request.use(AuthInterceptor);\r\n\r\ninstance.interceptors.response.use(OnResponseSuccess, OnResponseFailure);\r\n\r\nexport default instance;\r\n"],"sourceRoot":""}]}