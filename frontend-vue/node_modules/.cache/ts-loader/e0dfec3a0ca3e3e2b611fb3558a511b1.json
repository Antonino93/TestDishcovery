{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ProfileSettings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ProfileSettings.vue","mtime":1654451129841},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1NWSUxVUFBPL3Rlc3QvZnJvbnRlbmQtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9TVklMVVBQTy90ZXN0L2Zyb250ZW5kLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1NWSUxVUFBPL3Rlc3QvZnJvbnRlbmQtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQzovU1ZJTFVQUE8vdGVzdC9mcm9udGVuZC12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9TVklMVVBQTy90ZXN0L2Zyb250ZW5kLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgQ29tbW9uRXJyb3JzTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uRXJyb3JzTGlzdC52dWUiOwppbXBvcnQgQ29tbW9uTG9hZGVyIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25Mb2FkZXIudnVlIjsKaW1wb3J0IFVzZXIgZnJvbSAiQC9zdG9yZS9tb2R1bGVzL1VzZXIiOwppbXBvcnQgeyBpc0FycmF5T2ZTdHJpbmdzIH0gZnJvbSAiQC91dGlscy9BcnJheVV0aWxzIjsKCnZhciBQcm9maWxlU2V0dGluZ3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoUHJvZmlsZVNldHRpbmdzLCBfVnVlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQcm9maWxlU2V0dGluZ3MpOwoKICBmdW5jdGlvbiBQcm9maWxlU2V0dGluZ3MoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2ZpbGVTZXR0aW5ncyk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgX3RoaXMuaW1hZ2UgPSBudWxsOwogICAgX3RoaXMuYmlvID0gIiI7CiAgICBfdGhpcy5lbWFpbCA9ICIiOwogICAgX3RoaXMucGFzc3dvcmQgPSBudWxsOwogICAgX3RoaXMudXNlcm5hbWUgPSAiIjsKICAgIF90aGlzLmVycm9ycyA9IFtdOwogICAgX3RoaXMuc2VsZWN0ZWRJbWFnZSA9IG51bGw7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUHJvZmlsZVNldHRpbmdzLCBbewogICAga2V5OiAiaGFzRXJyb3JzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkZXJyb3JzOwoKICAgICAgcmV0dXJuICEhKChfdGhpcyRlcnJvcnMgPSB0aGlzLmVycm9ycykgIT09IG51bGwgJiYgX3RoaXMkZXJyb3JzICE9PSB2b2lkIDAgJiYgX3RoaXMkZXJyb3JzLmxlbmd0aCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VycmVudFVzZXIiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBVc2VyLmN1cnJlbnRVc2VyIHx8IHt9OwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBVc2VyLmxvZ291dCgpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogdGhpcy4kcm91dGVzTmFtZXMuaG9tZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGxvYWRJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkSW1hZ2UoZXZlbnQpIHsKICAgICAgdGhpcy5zZWxlY3RlZEltYWdlID0gZXZlbnQgPT09IG51bGwgfHwgZXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTZXR0aW5ncyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZVNldHRpbmdzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBmZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICAgICAgICAgICAgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZkLmFwcGVuZCgndXBsb2FkSW1hZ2UnLCB0aGlzLnNlbGVjdGVkSW1hZ2UpOwogICAgICAgICAgICAgICAgZmQuYXBwZW5kKCdlbWFpbCcsIHRoaXMuZW1haWwpOwogICAgICAgICAgICAgICAgZmQuYXBwZW5kKCdiaW8nLCB0aGlzLmJpbyk7CiAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ2ltYWdlJywgdGhpcy5pbWFnZSk7CiAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ3Bhc3N3b3JkJywgdGhpcy5wYXNzd29yZCk7CiAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ3VzZXJuYW1lJywgdGhpcy51c2VybmFtZSk7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBVc2VyLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICAgIHVzZXJVcGRhdGU6IGZkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kcm91dGVzTmFtZXMuaG9tZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oOSk7CgogICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5T2ZTdHJpbmdzKF9jb250ZXh0LnQwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gX2NvbnRleHQudDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIyOwogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjIpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1s5LCAxNSwgMjIsIDI1XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncygpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVTZXR0aW5nczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIm9uQ3VycmVudFVzZXJMb2FkZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ3VycmVudFVzZXJMb2FkZWQobmV3VmFsdWUpIHsKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKCiAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgIHRoaXMuaW1hZ2UgPSBuZXdWYWx1ZS5pbWFnZTsKICAgICAgICB0aGlzLmJpbyA9IG5ld1ZhbHVlLmJpbzsKICAgICAgICB0aGlzLmVtYWlsID0gbmV3VmFsdWUuZW1haWw7CiAgICAgICAgdGhpcy51c2VybmFtZSA9IG5ld1ZhbHVlLnVzZXJuYW1lOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUHJvZmlsZVNldHRpbmdzOwp9KFZ1ZSk7CgpfX2RlY29yYXRlKFtXYXRjaCgiY3VycmVudFVzZXIiLCB7CiAgaW1tZWRpYXRlOiB0cnVlCn0pXSwgUHJvZmlsZVNldHRpbmdzLnByb3RvdHlwZSwgIm9uQ3VycmVudFVzZXJMb2FkZWQiLCBudWxsKTsKClByb2ZpbGVTZXR0aW5ncyA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uTG9hZGVyOiBDb21tb25Mb2FkZXIsCiAgICBDb21tb25FcnJvcnNMaXN0OiBDb21tb25FcnJvcnNMaXN0CiAgfQp9KV0sIFByb2ZpbGVTZXR0aW5ncyk7CmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVTZXR0aW5nczs="},{"version":3,"sources":["C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\SVILUPPO\\test\\frontend-vue\\src\\views\\ProfileSettings.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\r\n\r\nimport CommonErrorsList from \"@/components/CommonErrorsList.vue\";\r\nimport CommonLoader from \"@/components/CommonLoader.vue\";\r\nimport { ICurrentUser } from \"@/store/models\";\r\nimport User from \"@/store/modules/User\";\r\nimport { isArrayOfStrings } from \"@/utils/ArrayUtils\";\r\n\r\n@Component({\r\n  components: {\r\n    CommonLoader,\r\n    CommonErrorsList\r\n  }\r\n})\r\nexport default class ProfileSettings extends Vue {\r\n  isLoading = false;\r\n\r\n  image: string | null = null;\r\n  bio = \"\";\r\n  email = \"\";\r\n  password: string | null = null;\r\n  username = \"\";\r\n  errors?: string[] = [];\r\n  selectedImage = null;\r\n\r\n  get hasErrors(): boolean {\r\n    return !!this.errors?.length;\r\n  }\r\n\r\n  get currentUser(): Partial<ICurrentUser> {\r\n    return User.currentUser || {};\r\n  }\r\n\r\n  logout(): void {\r\n    User.logout();\r\n    this.$router.push({ name: this.$routesNames.home });\r\n  }\r\n\r\n  uploadImage(event: Event): void{\r\n    this.selectedImage = (event?.target as HTMLInputElement).files[0];\r\n  }\r\n\r\n  async updateSettings(): Promise<void> {\r\n    this.errors = [];\r\n\r\n    const fd = new FormData();\r\n    fd.append('uploadImage', this.selectedImage);\r\n    fd.append('email', this.email);\r\n    fd.append('bio', this.bio);\r\n    fd.append('image', this.image);\r\n    fd.append('password', this.password);\r\n    fd.append('username', this.username);\r\n\r\n    this.isLoading = true;\r\n    try {\r\n      await User.update({\r\n        userUpdate: fd,\r\n      });\r\n      this.$router.push({ name: this.$routesNames.home });\r\n    } catch (e) {\r\n      if (isArrayOfStrings(e)) {\r\n        this.errors = e;\r\n      } else {\r\n        throw e;\r\n      }\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n  @Watch(\"currentUser\", { immediate: true })\r\n  onCurrentUserLoaded(newValue: ICurrentUser): void {\r\n    this.errors = [];\r\n    if (newValue) {\r\n      this.image = newValue.image;\r\n      this.bio = newValue.bio;\r\n      this.email = newValue.email;\r\n      this.username = newValue.username;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}