{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js??ref--14-3!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\router\\index.ts","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\router\\index.ts","mtime":1654014379713},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1NWSUxVUFBPL3Rlc3QvZnJvbnRlbmQtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBWdWVSb3V0ZXIsIHsgTG9jYXRpb24gfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IFVzZXIgZnJvbSAiQC9zdG9yZS9tb2R1bGVzL1VzZXIiOwppbXBvcnQgeyBSb3V0ZXMgfSBmcm9tICIuL3JvdXRlcyI7CmltcG9ydCBSb3V0ZXNOYW1lcyBmcm9tICIuL3JvdXRlc05hbWVzIjsKVnVlLnVzZShWdWVSb3V0ZXIpOwp2YXIgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogImhpc3RvcnkiLAogIGJhc2U6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogIHJvdXRlczogUm91dGVzCn0pOwoKdmFyIHJlcXVpcmVzQXV0aEd1YXJkID0gZnVuY3Rpb24gcmVxdWlyZXNBdXRoR3VhcmQodG8sIGZyb20sIG5leHQpIHsKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGg7CiAgfSkpIHsKICAgIHZhciBpc0xvZ2dlZEluID0gISFVc2VyLmN1cnJlbnRVc2VyOwoKICAgIGlmICghaXNMb2dnZWRJbikgewogICAgICBuZXh0KHsKICAgICAgICBuYW1lOiBSb3V0ZXNOYW1lcy5hdXRoTG9naW4sCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCk7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn07Cgp2YXIgYW5vbnltb3VzT25seUd1YXJkID0gZnVuY3Rpb24gYW5vbnltb3VzT25seUd1YXJkKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEuYW5vbnltb3VzT25seTsKICB9KSkgewogICAgdmFyIGlzQW5vbnltb3VzID0gIVVzZXIuY3VycmVudFVzZXI7CgogICAgaWYgKCFpc0Fub255bW91cykgewogICAgICBuZXh0KHsKICAgICAgICBuYW1lOiBSb3V0ZXNOYW1lcy5ob21lCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9OwoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBVc2VyLmNvbXBsZXRlQXV0aCgpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKCFyZXF1aXJlc0F1dGhHdWFyZCh0bywgZnJvbSwgbmV4dCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBpZiAoIWFub255bW91c09ubHlHdWFyZCh0bywgZnJvbSwgbmV4dCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBuZXh0KCk7IC8vIG1ha2Ugc3VyZSB0byBhbHdheXMgY2FsbCBuZXh0KCkhCgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IHsgTG9jYXRpb24sIFJvdXRlc05hbWVzIH07CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\router\\index.ts"],"names":[],"mappings":";;AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,SAAP,IAAoB,QAApB,QAA2C,YAA3C;AAEA,OAAO,IAAP,MAAiB,sBAAjB;AAEA,SAAS,MAAT,QAAuB,UAAvB;AACA,OAAO,WAAP,MAAwB,eAAxB;AAEA,GAAG,CAAC,GAAJ,CAAQ,SAAR;AAEA,IAAM,MAAM,GAAG,IAAI,SAAJ,CAAc;AAC3B,EAAA,IAAI,EAAE,SADqB;AAE3B,EAAA,IAAI,EAAE,OAAO,CAAC,GAAR,CAAY,QAFS;AAG3B,EAAA,MAAM,EAAE;AAHmB,CAAd,CAAf;;AAMA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,EAAD,EAAY,IAAZ,EAAyB,IAAzB,EAAoD;AAC5E,MAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAA,MAAM;AAAA,WAAI,MAAM,CAAC,IAAP,CAAY,YAAhB;AAAA,GAAtB,CAAJ,EAAyD;AACvD,QAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,WAA1B;;AACA,QAAI,CAAC,UAAL,EAAiB;AACf,MAAA,IAAI,CAAC;AACH,QAAA,IAAI,EAAE,WAAW,CAAC,SADf;AAEH,QAAA,KAAK,EAAE;AAAE,UAAA,QAAQ,EAAE,EAAE,CAAC;AAAf;AAFJ,OAAD,CAAJ;AAID,KALD,MAKO;AACL,MAAA,IAAI;AACL;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CAdD;;AAgBA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,CACzB,EADyB,EAEzB,IAFyB,EAGzB,IAHyB,EAId;AACX,MAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAA,MAAM;AAAA,WAAI,MAAM,CAAC,IAAP,CAAY,aAAhB;AAAA,GAAtB,CAAJ,EAA0D;AACxD,QAAM,WAAW,GAAG,CAAC,IAAI,CAAC,WAA1B;;AACA,QAAI,CAAC,WAAL,EAAkB;AAChB,MAAA,IAAI,CAAC;AACH,QAAA,IAAI,EAAE,WAAW,CAAC;AADf,OAAD,CAAJ;AAGD,KAJD,MAIO;AACL,MAAA,IAAI;AACL;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CAjBD;;AAmBA,MAAM,CAAC,UAAP;AAAA,qEAAkB,iBAAO,EAAP,EAAW,IAAX,EAAiB,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACV,IAAI,CAAC,YAAL,EADU;;AAAA;AAAA,iBAEZ,iBAAiB,CAAC,EAAD,EAAK,IAAL,EAAW,IAAX,CAFL;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,iBAKZ,kBAAkB,CAAC,EAAD,EAAK,IAAL,EAAW,IAAX,CALN;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQhB,YAAA,IAAI,GARY,CAQR;;AARQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAWA,SAAS,QAAT,EAAmB,WAAnB;AACA,eAAe,MAAf","sourcesContent":["import Vue from \"vue\";\r\nimport VueRouter, { Location, Route } from \"vue-router\";\r\n\r\nimport User from \"@/store/modules/User\";\r\n\r\nimport { Routes } from \"./routes\";\r\nimport RoutesNames from \"./routesNames\";\r\n\r\nVue.use(VueRouter);\r\n\r\nconst router = new VueRouter({\r\n  mode: \"history\",\r\n  base: process.env.BASE_URL,\r\n  routes: Routes\r\n});\r\n\r\nconst requiresAuthGuard = (to: Route, from: Route, next: Function): boolean => {\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    const isLoggedIn = !!User.currentUser;\r\n    if (!isLoggedIn) {\r\n      next({\r\n        name: RoutesNames.authLogin,\r\n        query: { redirect: to.fullPath }\r\n      });\r\n    } else {\r\n      next();\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nconst anonymousOnlyGuard = (\r\n  to: Route,\r\n  from: Route,\r\n  next: Function\r\n): boolean => {\r\n  if (to.matched.some(record => record.meta.anonymousOnly)) {\r\n    const isAnonymous = !User.currentUser;\r\n    if (!isAnonymous) {\r\n      next({\r\n        name: RoutesNames.home\r\n      });\r\n    } else {\r\n      next();\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n  await User.completeAuth();\r\n  if (requiresAuthGuard(to, from, next)) {\r\n    return;\r\n  }\r\n  if (anonymousOnlyGuard(to, from, next)) {\r\n    return;\r\n  }\r\n  next(); // make sure to always call next()!\r\n});\r\n\r\nexport { Location, RoutesNames };\r\nexport default router;\r\n"],"sourceRoot":""}]}