{"remainingRequest":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts","dependencies":[{"path":"C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts","mtime":1654157002051},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgcm91dGVzTmFtZXMgZnJvbSAiQC9yb3V0ZXIvcm91dGVzTmFtZXMiOwppbXBvcnQgSHR0cFN0YXR1c0NvZGVzIGZyb20gIkAvc2VydmljZXMvY29tbW9uL0h0dHBTdGF0dXNDb2RlcyI7CmltcG9ydCBVc2VyIGZyb20gIkAvc3RvcmUvbW9kdWxlcy9Vc2VyIjsKaW1wb3J0IHsgbm90aWZ5RXJyb3JzLCBub3RpZnlXYXJuIH0gZnJvbSAiQC91dGlscy9Ob3RpZmljYXRpb25VdGlscyI7CmltcG9ydCB7IHRyYW5zZm9ybUVycm9ycyB9IGZyb20gIi4vVXRpbHMiOwoKdmFyIEF1dGhJbnRlcmNlcHRvciA9IGZ1bmN0aW9uIEF1dGhJbnRlcmNlcHRvcihjb25maWcpIHsKICB2YXIgYWNjZXNzVG9rZW4gPSBVc2VyLmF1dGhUb2tlbjsKICBpZiAoYWNjZXNzVG9rZW4pIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KGFjY2Vzc1Rva2VuKTsKICByZXR1cm4gY29uZmlnOwp9OwoKdmFyIE9uUmVzcG9uc2VTdWNjZXNzID0gZnVuY3Rpb24gT25SZXNwb25zZVN1Y2Nlc3MocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn07Cgp2YXIgT25SZXNwb25zZUZhaWx1cmUgPSBmdW5jdGlvbiBPblJlc3BvbnNlRmFpbHVyZShlcnJvcikgewogIHZhciBfZXJyb3IkcmVzcG9uc2UsIF9lcnJvciRyZXNwb25zZTIsIF9lcnJvciRyZXNwb25zZTIkZGF0YTsKCiAgdmFyIGh0dHBTdGF0dXMgPSBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5zdGF0dXM7CiAgdmFyIGVycm9ycyA9IHRyYW5zZm9ybUVycm9ycyhlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZTIgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZTIkZGF0YSA9IF9lcnJvciRyZXNwb25zZTIuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UyJGRhdGEuZXJyb3JzKTsKICB2YXIgaXNVbmtub3duRXJyb3IgPSBlcnJvcnMgPT09IG51bGwgfHwgZXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvcnNbMF0uc3RhcnRzV2l0aCgiVW5rbm93biIpOwoKICBzd2l0Y2ggKGh0dHBTdGF0dXMpIHsKICAgIGNhc2UgSHR0cFN0YXR1c0NvZGVzLlVOQVVUSE9SSVpFRDoKICAgICAgVXNlci5sb2dvdXQoKTsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6IHJvdXRlc05hbWVzLmF1dGhMb2dpbgogICAgICB9KTsKICAgICAgbm90aWZ5V2FybigiWW91IGFyZSBub3QgbG9nZ2VkIGluLCBwbGVhc2UgbG9naW4gZmlyc3QuIik7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgSHR0cFN0YXR1c0NvZGVzLk5PVF9GT1VORDoKICAgICAgbm90aWZ5RXJyb3JzKChlcnJvcnMgPT09IG51bGwgfHwgZXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvcnMubGVuZ3RoKSA+IDAgJiYgIWlzVW5rbm93bkVycm9yID8gZXJyb3JzIDogWyJSZXF1ZXN0ZWQgcmVzb3VyY2Ugd2FzIG5vdCBmb3VuZC4iXSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgSHR0cFN0YXR1c0NvZGVzLkZPUkJJRERFTjoKICAgICAgbm90aWZ5RXJyb3JzKChlcnJvcnMgPT09IG51bGwgfHwgZXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvcnMubGVuZ3RoKSA+IDAgJiYgIWlzVW5rbm93bkVycm9yID8gZXJyb3JzIDogWyJBY2Nlc3MgdG8gdGhpcyByZXNvdXJjZSBpcyBmb3JiaWRkZW4iXSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgSHR0cFN0YXR1c0NvZGVzLlVOUFJPQ0VTU0FCTEVfRU5USVRZOgogICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGJlIGhhbmRsZWQgYXQgdGhlIGZvcm1zCiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIG5vdGlmeUVycm9ycygoZXJyb3JzID09PSBudWxsIHx8IGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JzLmxlbmd0aCkgPiAwID8gZXJyb3JzIDogWyJVbmtub3duIGVycm9yIG9jY3VycmVkLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLiJdKTsKICAgICAgYnJlYWs7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JzKTsKfTsKCnZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9SRUFMX1dPUkxEX0FQSV9VUkwsCiAgdGltZW91dDogNTAwMAp9KTsKaW5zdGFuY2UuZGVmYXVsdHMuaGVhZGVycy5nZXQuQWNjZXB0cyA9ICJhcHBsaWNhdGlvbi9qc29uIjsKaW5zdGFuY2UuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiJdID0gIioiOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoQXV0aEludGVyY2VwdG9yKTsKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShPblJlc3BvbnNlU3VjY2VzcywgT25SZXNwb25zZUZhaWx1cmUpOwpleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTs="},{"version":3,"sources":["C:\\SVILUPPO\\test\\frontend-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\SVILUPPO\\test\\frontend-vue\\src\\services\\realWorldApi\\RealWorldApiBase.ts"],"names":[],"mappings":";;AAAA,OAAO,KAAP,MAAwE,OAAxE;AAEA,OAAO,MAAP,MAAmB,UAAnB;AACA,OAAO,WAAP,MAAwB,sBAAxB;AACA,OAAO,eAAP,MAA4B,mCAA5B;AACA,OAAO,IAAP,MAAiB,sBAAjB;AACA,SAAS,YAAT,EAAuB,UAAvB,QAAyC,2BAAzC;AAEA,SAAS,eAAT,QAAgC,SAAhC;;AAEA,IAAM,eAAe,GAAG,SAAlB,eAAkB,CAAC,MAAD,EAAmD;AACzE,MAAM,WAAW,GAAG,IAAI,CAAC,SAAzB;AACA,MAAI,WAAJ,EAAiB,MAAM,CAAC,OAAP,CAAe,aAAf,oBAAyC,WAAzC;AACjB,SAAO,MAAP;AACD,CAJD;;AAMA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,QAAD;AAAA,SACxB,QADwB;AAAA,CAA1B;;AAGA,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,KAAD,EAA6B;AAAA;;AACrD,MAAM,UAAU,GAAG,KAAH,aAAG,KAAH,0CAAG,KAAK,CAAE,QAAV,oDAAG,gBAAiB,MAApC;AAEA,MAAM,MAAM,GAAG,eAAe,CAAC,KAAD,aAAC,KAAD,2CAAC,KAAK,CAAE,QAAR,8EAAC,iBAAiB,IAAlB,0DAAC,sBAAuB,MAAxB,CAA9B;AACA,MAAM,cAAc,GAAG,MAAH,aAAG,MAAH,uBAAG,MAAM,CAAG,CAAH,CAAN,CAAY,UAAZ,CAAuB,SAAvB,CAAvB;;AAEA,UAAQ,UAAR;AACE,SAAK,eAAe,CAAC,YAArB;AACE,MAAA,IAAI,CAAC,MAAL;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE,WAAW,CAAC;AAApB,OAAZ;AACA,MAAA,UAAU,CAAC,4CAAD,CAAV;AACA;;AACF,SAAK,eAAe,CAAC,SAArB;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,IAAsB,CAAC,cAAvB,GACI,MADJ,GAEI,CAAC,mCAAD,CAHM,CAAZ;AAKA;;AACF,SAAK,eAAe,CAAC,SAArB;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,IAAsB,CAAC,cAAvB,GACI,MADJ,GAEI,CAAC,sCAAD,CAHM,CAAZ;AAKA;;AACF,SAAK,eAAe,CAAC,oBAArB;AACE;AACA;;AACF;AACE,MAAA,YAAY,CACV,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,MAAR,IAAiB,CAAjB,GACI,MADJ,GAEI,CAAC,iDAAD,CAHM,CAAZ;AAKA;AA7BJ;;AA+BA,SAAO,OAAO,CAAC,MAAR,CAAe,MAAf,CAAP;AACD,CAtCD;;AAwCA,IAAM,QAAQ,GAA4B,KAAK,CAAC,MAAN,CAAa;AACrD,EAAA,OAAO,EAAE,OAAO,CAAC,GAAR,CAAY,0BADgC;AAErD,EAAA,OAAO,EAAE;AAF4C,CAAb,CAA1C;AAKA,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,GAA1B,CAA8B,OAA9B,GAAwC,kBAAxC;AACA,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,MAA1B,CAAiC,6BAAjC,IAAkE,GAAlE;AAEA,QAAQ,CAAC,YAAT,CAAsB,OAAtB,CAA8B,GAA9B,CAAkC,eAAlC;AAEA,QAAQ,CAAC,YAAT,CAAsB,QAAtB,CAA+B,GAA/B,CAAmC,iBAAnC,EAAsD,iBAAtD;AAEA,eAAe,QAAf","sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from \"axios\";\r\n\r\nimport router from \"@/router\";\r\nimport routesNames from \"@/router/routesNames\";\r\nimport HttpStatusCodes from \"@/services/common/HttpStatusCodes\";\r\nimport User from \"@/store/modules/User\";\r\nimport { notifyErrors, notifyWarn } from \"@/utils/NotificationUtils\";\r\n\r\nimport { transformErrors } from \"./Utils\";\r\n\r\nconst AuthInterceptor = (config: AxiosRequestConfig): AxiosRequestConfig => {\r\n  const accessToken = User.authToken;\r\n  if (accessToken) config.headers.Authorization = `Bearer ${accessToken}`;\r\n  return config;\r\n};\r\n\r\nconst OnResponseSuccess = (response: AxiosResponse<any>): AxiosResponse<any> =>\r\n  response;\r\n\r\nconst OnResponseFailure = (error: any): Promise<any> => {\r\n  const httpStatus = error?.response?.status;\r\n\r\n  const errors = transformErrors(error?.response?.data?.errors);\r\n  const isUnknownError = errors?.[0].startsWith(\"Unknown\");\r\n\r\n  switch (httpStatus) {\r\n    case HttpStatusCodes.UNAUTHORIZED:\r\n      User.logout();\r\n      router.push({ name: routesNames.authLogin });\r\n      notifyWarn(\"You are not logged in, please login first.\");\r\n      break;\r\n    case HttpStatusCodes.NOT_FOUND:\r\n      notifyErrors(\r\n        errors?.length > 0 && !isUnknownError\r\n          ? errors\r\n          : [\"Requested resource was not found.\"]\r\n      );\r\n      break;\r\n    case HttpStatusCodes.FORBIDDEN:\r\n      notifyErrors(\r\n        errors?.length > 0 && !isUnknownError\r\n          ? errors\r\n          : [\"Access to this resource is forbidden\"]\r\n      );\r\n      break;\r\n    case HttpStatusCodes.UNPROCESSABLE_ENTITY:\r\n      // This case should be handled at the forms\r\n      break;\r\n    default:\r\n      notifyErrors(\r\n        errors?.length > 0\r\n          ? errors\r\n          : [\"Unknown error occurred, please try again later.\"]\r\n      );\r\n      break;\r\n  }\r\n  return Promise.reject(errors);\r\n};\r\n\r\nconst instance: Readonly<AxiosInstance> = axios.create({\r\n  baseURL: process.env.VUE_APP_REAL_WORLD_API_URL,\r\n  timeout: 5000\r\n});\r\n\r\ninstance.defaults.headers.get.Accepts = \"application/json\";\r\ninstance.defaults.headers.common[\"Access-Control-Allow-Origin\"] = \"*\";\r\n\r\ninstance.interceptors.request.use(AuthInterceptor);\r\n\r\ninstance.interceptors.response.use(OnResponseSuccess, OnResponseFailure);\r\n\r\nexport default instance;\r\n"],"sourceRoot":""}]}